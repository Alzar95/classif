<ng-template #showMenuTooltip>Показать<br/>меню</ng-template>

<div class="eos-node-actions">
    <ng-container *ngFor="let item of buttons">
        <div class="visible-lg-inline-block actions"
            *ngIf="item.show">
            <ng-container *ngIf="item.type === ADD_ACTION && isTree">
                <span dropdown
                    class="btn-group">
                    <!--Icons button for tree and ADD-->
                    <div [tooltip]="item.hint"
                     #itemTooltip="bs-tooltip"
                        placement="bottom"
                        containerClass="tooltip-info">
                        <button dropdownToggle
                            [disabled]="!item.enabled"
                            class="btn btn-primary-light {{item.buttonClass}}"
                            [ngClass]="{active: item.isActive}"
                            (click)="itemTooltip.hide();">
                            <span [hidden]="item.isActive"
                                [ngClass]="item.iconClass"></span>
                            <span [hidden]="!item.isActive"
                                [ngClass]="activeIcon"></span>
                        </button>
                    </div>

                    <ul *dropdownMenu
                        class="dropdown-menu create-menu"
                        role="menu">
                        <li *ngFor="let elem of addMenu"
                            role="menuitem"
                            class="menuitem">
                            <a class="dropdown-item f-14 selected"
                                tooltip="{{elem.hint}}"
                                placement="bottom"
                                containerClass="tooltip-info"
                                (click)="doAction($event, item, elem.params)">
                                    <span>{{elem.title}}</span>
                            </a>
                        </li>
                    </ul>
                </span>
            </ng-container>

            <ng-container *ngIf="item.type !== ADD_ACTION || !isTree">
                <!--Icons button for other-->
                <span class="btn-group">
                    <div [tooltip]="item.hint"
                        #itemTooltip="bs-tooltip"
                        placement="bottom"
                        containerClass="tooltip-info">
                        <button [disabled]="!item.enabled"
                            class="btn btn-primary-light {{item.buttonClass}}"
                            [ngClass]="{active: item.isActive}"
                            (click)="itemTooltip.hide(); doAction($event, item, null)">
                            <span [hidden]="item.isActive"
                                [ngClass]="item.iconClass"></span>
                            <span [hidden]="!item.isActive"
                                [ngClass]="item.activeIconClass"></span>
                        </button>
                    </div>
                </span>
            </ng-container>
        </div>
    </ng-container>

    <div class="actions"
        dropdown
        container="body"
        #dropdown="bs-dropdown">
        <button class="btn btn-primary-light"
            [tooltip]="showMenuTooltip"
            #itemTooltip="bs-tooltip"
            placement="bottom"
            containerClass="tooltip-info"
            dropdownToggle
            (click)="itemTooltip.hide()">
            <span class="eos-icon eos-icon-fab-blue small rotate"></span>
        </button>
        <!--MENU-->
        <ul *dropdownMenu
            class="dropdown-menu action-menu"
            role="menu">
            <!--Common buttons-->
            <li *ngFor="let item of buttons"
                role="menuitem"
                placement="right"
                container="body"
                dropdown
                triggers="mouseclick"
                class="menuitem hide-on-big">
                <a class="dropdown-item selected f-14"
                    [ngClass]="{'highlighted': item.isActive}"
                    tooltip="{{item.hint}}"
                    placement="bottom"
                    containerClass="tooltip-info"
                    *ngIf="item.show && item.type !== ADD_ACTION && isTree"
                    (click)="doAction($event, item); menuMng($event, item.enabled, dropdown)">
                    <div class="drop-ico">
                        <span *ngIf="item.enabled"
                            class="{{item.iconClass}}"></span>
                        <span *ngIf="!item.enabled"
                            class="{{item.disabledIconClass}}"></span>
                    </div>
                    <span [ngClass]="{'disabled': !item.enabled}">{{item.title}}</span>
                </a>

                <a class="dropdown-item selected f-14"
                    [ngClass]="{'highlighted': item.isActive}"
                    dropdownToggle
                    tooltip="{{item.hint}}"
                    placement="bottom"
                    containerClass="tooltip-info"
                    *ngIf="item.show && item.type === ADD_ACTION && isTree"
                    (click)="stopCloseMenu($event)">
                    <div class="drop-ico">
                        <span *ngIf="item.enabled"
                            class="{{item.iconClass}}"></span>
                        <span *ngIf="!item.enabled"
                            class="{{item.disabledIconClass}}"></span>
                    </div>
                    <span [ngClass]="{'disabled': !item.enabled}">{{item.title}}</span>
                </a>
                <!--Two lvl menu-->
                <ul *dropdownMenu
                    class="dropdown-menu menu-two-lvl hidden-lg"
                    role="menu">
                    <li class="menuitem"
                        *ngFor="let type of addMenu"
                        role="menuitem">
                        <a class="dropdown-item f-14 selected have-padding"
                            tooltip="{{item.hint}}"
                            placement="bottom"
                            containerClass="tooltip-info"
                            (click)="doAction($event, item, type.params)">
                            <span>{{type.title}}</span>
                        </a>
                    </li>
                </ul>
            </li>
            <!--More buttons-->
            <li *ngFor="let item of moreButtons"
                role="menuitem"
                class="menuitem">
                <a class="dropdown-item f-14 selected"
                    [ngClass]="{'highlighted': item.isActive}"
                    tooltip="{{item.hint}}"
                    placement="bottom"
                    containerClass="tooltip-info"
                    *ngIf="item.show"
                    (click)="doAction($event, item)">
                    <div class="drop-ico">
                        <span *ngIf="item.enabled"
                            class="{{item.iconClass}}"></span>
                        <span *ngIf="!item.enabled"
                            class="{{item.disabledIconClass}}"></span>
                    </div>
                    <span [ngClass]="{'disabled': !item.enabled}">{{item.title}}</span>
                </a>
            </li>
        </ul>
    </div>
</div>
