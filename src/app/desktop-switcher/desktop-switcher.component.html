<div *ngIf="deskList" #dropDown="bs-dropdown" bsDropdown class="btn-group eos-desktop-switcher" dropdown [autoClose]="!innerClick"
    (click)="setInnerClick()">
    <button dropdownToggle type="button" class="dropdown-button btn dropdown-toggle">
        <span class="selected-desktop" tooltip="{{selectedDesk.name}}" placement="bottom" container="body">{{selectedDesk.name}}</span>
        <span class="btn-icon">
            <span class="eos-icon eos-icon-arrow-v-blue-bottom small"></span>
        </span>
    </button>
    <ul class="dropdown-menu" role="menu">
        <li *ngFor="let desk of deskList" role="menuitem" class="menuitem">
            <span [hidden]="desk.edited">
                <span [hidden]="desk.edited" class="desktop-wrapper">
                    <a class="dropdown-item" [routerLink]="['/desk', desk.id]">
                        <span (click)="hideDropDown()" tooltip="{{desk.name}}" placement="left" container="body">{{desk.name}}</span>
                    </a>
                </span>
                <span *ngIf="desk.id !== 'system'" class="actions">
                    <span class="eos-icon eos-icon-edit-black x-small" tooltip="Редактировать" (click)="openEditForm($event, desk)"></span>
                    <span class="eos-icon eos-icon-close-black x-small" tooltip="Удалить" (click)="removeDesk(desk)"></span>
                </span>
            </span>
            <span [hidden]="!desk.edited">
                <div class="input-group">
                    <input type="text" class="form-control" [(ngModel)]="deskName" maxlength="{{maxLength}}" required />
                    <div class="input-group-btn">
                        <button type="button" (click)="saveDesk(desk)" class="btn btn-default" 
                            [disabled]="!deskName?.trim().substring(0, this.maxLength).length">
                            <span class="eos-icon eos-icon-checkbox-black x-small" tooltip="Сохранить"></span>
                        </button>
                        <button type="button" (click)="cancelEdit(desk)" class="btn btn-default">
                            <span class="eos-icon eos-icon-close-black x-small" tooltip="Отменить"></span>
                        </button>
                    </div>
                </div>
            </span>
        </li>
        <li *ngIf="deskList.length < 6" class="divider dropdown-divider"></li>
        <li *ngIf="deskList.length < 6">
            <a><span *ngIf="!creating" class="create" (click)="openCreateForm()">Создать рабочий стол</span>
                <div *ngIf="creating" class="input-group">
                    <input type="text" class="form-control" placeholder="Название нового рабочего стола" [(ngModel)]="deskName" maxlength="{{maxLength}}" required />
                    <span class="input-group-btn">
                        <button class="btn btn-default" (click)="create()" type="button" tooltip="Сохранить">
                            <span class="eos-icon eos-icon-checkbox-black x-small"></span>
                        </button>
                        <button class="btn btn-default" (click)="cancelCreating()" type="button" tooltip="Отменить">
                            <span class="eos-icon eos-icon-close-black x-small"></span>
                        </button>
                    </span>
                </div>
            </a>
        </li>
    </ul>
</div>
